<div class="container">
  <h1>My Files</h1>
  <p class="mute">All files youâ€™ve uploaded. Click download to save locally, preview, or delete.</p>

  <% if (files.length === 0) { %>
    <div class="card no-files">
      <p class="mute">No files uploaded yet.</p>
      <a class="btn btn-primary" href="/upload">Upload your first file</a>
    </div>
  <% } else { %>
    <div class="files-grid">
      <% files.forEach(file => { %>
        <div class="file-card">
          <% if (file.mimetype.startsWith('image/')) { %>
            <img src="<%= file.url %>" alt="<%= file.filename %>" class="file-preview">
          <% } else if (file.mimetype.startsWith('video/')) { %>
            <video class="file-preview" controls>
              <source src="<%= file.url %>" type="<%= file.mimetype %>">
              Your browser does not support video playback.
            </video>
          <% } else { %>
            <div class="file-icon">ðŸ“„</div>
          <% } %>

          <div class="file-info">
            <span class="filename mono"><%= file.filename %></span>
            <span class="file-meta mute"><%= file.mimetype %> â€¢ <%= (file.size/1024).toFixed(1) %> KB</span>
            <span class="file-meta mute">Added: <%= new Date(file.createdAt).toLocaleString() %></span>
          </div>

          <div class="file-actions">
            <a class="btn btn-primary" href="/download/<%= file.id %>">Download</a>
            <form action="/delete/<%= file.id %>" method="POST" onsubmit="return confirm('Delete this file? This cannot be undone.')">
              <button class="btn btn-danger" type="submit">Delete</button>
            </form>
          </div>
        </div>
      <% }) %>
    </div>
  <% } %>

  <div class="row" style="margin-top:14px">
    <a class="btn btn-primary" href="/upload">Upload More</a>
  </div>
</div>
